##FlashxRecipeLang V 1:2021-04-05
#####################
# Recipe Instructions
#####################

@BEGIN_RECIPEINSTRUCTIONS NAME My_Sedov_Instructions

@DATASOURCE           NAME it              ITERATE ALL LEAVES
@BEGIN_CONCURRENTDATA NAME dIn  AFTER it                                  INDATA (DENS, VELX, VELY, VELZ, PRES, ENER)                SCRATCH (flX, flY, flZ, auxC)
@RecipeInstruction    NAME hySp AFTER dIn  INVOKE hy_computeSoundSpeedHll INDATA (DENS,                   PRES      )                OUTDATA (               auxC)
@RecipeInstruction    NAME hyFl AFTER hySp INVOKE hy_computeFluxesHll     INDATA (DENS, VELX, VELY, VELZ, PRES, ENER, auxC)          OUTDATA (flX, flY, flZ      )
@RecipeInstruction    NAME hyUp AFTER hyFl INVOKE hy_updateSolutionHll    INDATA (DENS, VELX, VELY, VELZ,       ENER, flX, flY, flZ) OUTDATA (                     DENS, VELX, VELY, VELZ,       ENER)
@RecipeInstruction    NAME eosG AFTER hyUp INVOKE eos_idealGammaDensIe    INDATA (DENS, VELX, VELY, VELZ,       ENER)                OUTDATA (                                             PRES, ENER)
@RecipeInstruction    NAME ioIq AFTER eosG INVOKE io_computeIntegralQuantitiesByBlock ,
                                                                          INDATA (DENS, VELX, VELY, VELZ,       ENER)
@END_CONCURRENTDATA   NAME dOut AFTER ioIq                                                                                           OUTDATA (                     DENS, VELX, VELY, VELZ, PRES, ENER)

@END_RECIPEINSTRUCTIONS   NAME My_Sedov_Instructions

##########################
# Recipe Hardware Mappings
##########################

@BEGIN_RECIPELOCATIONS NAME My_Sedov_Locations INSTRUCTIONS My_Sedov_Instructions
@USE My_Sedov_Instructions
@USE My_Machine_Hints

@BEGIN_CONCURRENTHW
@HwType NAME CPU  RUNS_INSTRUCTIONS ioIq
@HwType NAME GPU  RUNS_INSTRUCTIONS hySp, hyFl, hyUp, eosG
@END_CONCURRENTHW

@END_RECIPELOCATIONS   NAME My_Sedov_Locations

#######################
# Recipe Hardware Hints
#######################

@BEGIN_RECIPEHINTS NAME My_Machine_Hints

@BEGIN_CONCURRENTHW
@HwType NAME CPU   PARAMETERS {nInitialThreads:  4, nTilesPerPacket:  0}
@HwType NAME GPU   PARAMETERS {nInitialThreads: 16, nTilesPerPacket: 64} 
@END_CONCURRENTHW

@END_RECIPEHINTS   NAME My_Machine_Hints
